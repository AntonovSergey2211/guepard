
(function()
{"use strict";var d={};d.ResourcesManager=function()
{};var s={};s.__init__=function()
{this._items=new flash.utils.Dictionary();this._completeHandler=null;this._errorHandler=null;this._progressHandler=null;this._itemsForLoad=null;this._itemsTotal=0;};s.get_itemsTotal=function()
{return resources.ResourcesManager._itemsTotal;};s.get_itemsLoaded=function()
{return resources.ResourcesManager._itemsTotal-resources.ResourcesManager._itemsForLoad.length;};s.contains=function(item)
{return resources.ResourcesManager._items.getProperty(item.path)!=undefined;};s.clear=function()
{var path=null;var t0=null;for(t0 in resources.ResourcesManager._items._keys)
{path=resources.ResourcesManager._items._keys[t0];resources.ResourcesManager._items.deleteProperty(path)}};s.getItem=function(name)
{return resources.ResourcesManager._items.getProperty(name);};s.addItem=function(item)
{if(resources.ResourcesManager.contains(item))
{return}
resources.ResourcesManager._items.setProperty(item.path,item);};s.load=function(completeHandler,progressHandler,errorHandler)
{var path=null;var item=null;var t0=null;resources.ResourcesManager._progressHandler=progressHandler;resources.ResourcesManager._completeHandler=completeHandler;resources.ResourcesManager._errorHandler=errorHandler;resources.ResourcesManager._itemsForLoad=new Array();for(t0 in resources.ResourcesManager._items._keys)
{path=resources.ResourcesManager._items._keys[t0];item=resources.ResourcesManager._items.getProperty(path);if(!item.loaded)
{resources.ResourcesManager._itemsForLoad.push(resources.ResourcesManager._items.getProperty(path))}}
resources.ResourcesManager._itemsTotal=resources.ResourcesManager._itemsForLoad.length;resources.ResourcesManager.loadNext();};s.updateItem=function(path)
{var item=null;item=resources.ResourcesManager.getItem(path);if(item)
{item.loaded=false}};s.loadNext=function()
{var item=null;if(resources.ResourcesManager._progressHandler!=null)
{resources.ResourcesManager._progressHandler(resources.ResourcesManager.get_itemsLoaded()/resources.ResourcesManager.get_itemsTotal())}
if(resources.ResourcesManager._itemsForLoad.length)
{item=resources.ResourcesManager._itemsForLoad.pop();item.load(flash.bindFunction(resources.ResourcesManager,resources.ResourcesManager.loadNextComplete),flash.bindFunction(resources.ResourcesManager,resources.ResourcesManager.loadNextError))}
else
{if(resources.ResourcesManager._completeHandler!=null)
{resources.ResourcesManager._completeHandler()}}};s.loadNextComplete=function()
{resources.ResourcesManager.loadNext();};s.loadNextError=function(message)
{if(resources.ResourcesManager._errorHandler!=null)
{resources.ResourcesManager._errorHandler(message)}};flash.addDescription("resources.ResourcesManager",d,null,s,null,["flash.utils.Dictionary","resources.ResourceItem"]);}
());;
(function()
{"use strict";var d={};d._completeHandler=null;d._errorHandler=null;d.width=0;d.height=0;d.path=null;d.data=null;d.loaded=false;d.get_movieClip=function()
{return(this.data);};d.get_bitmapData=function()
{return(this.data).get_bitmapData();};d.get_string=function()
{return String(this.data);};d.get_sound=function()
{return(this.data);};d.get_xml=function()
{var xml=null;xml=new flash.xml.XMLDocument();xml.ignoreWhite=true;try
{xml.parseXML(String(this.data))}
catch(e)
{throw new Error("Не верный формат XML.\nФайл: "+this.path+"\n\n"+e.message);}
return xml;};d.ResourceItem=function(path)
{if(path==undefined)path=null;this.path=path;this.loaded=false;};d.load=function(completeHandler,errorHandler)
{var rndPath=null;var loader=null;var urlLoader=null;var sound=null;var stream=null;this._completeHandler=completeHandler;this._errorHandler=errorHandler;rndPath=this.path+"?rnd="+Math.random().toString();flash.trace("load: "+this.path);switch(utils.Path.getExtension(this.path).toLowerCase())
{case"swf":case"jpg":case"png":loader=new flash.display.Loader();loader.get_contentLoaderInfo().addEventListener(flash.events.Event.COMPLETE,flash.bindFunction(this,this.loadDisplayObjectComplete));loader.get_contentLoaderInfo().addEventListener(flash.events.IOErrorEvent.IO_ERROR,flash.bindFunction(this,this.loadIOError));loader.load(new flash.net.URLRequest(rndPath));break;;case"txt":case"xml":urlLoader=new flash.net.URLLoader();urlLoader.addEventListener(flash.events.Event.COMPLETE,flash.bindFunction(this,this.loadTextComplete));urlLoader.addEventListener(flash.events.IOErrorEvent.IO_ERROR,flash.bindFunction(this,this.loadIOError));urlLoader.addEventListener(flash.events.SecurityErrorEvent.SECURITY_ERROR,flash.bindFunction(this,this.loadSecurityError));urlLoader.load(new flash.net.URLRequest(rndPath));break;;case"mp3":case"wav":sound=new flash.media.Sound();sound.addEventListener(flash.events.Event.COMPLETE,flash.bindFunction(this,this.loadSoundComplete));sound.addEventListener(flash.events.IOErrorEvent.IO_ERROR,flash.bindFunction(this,this.loadIOError));sound.addEventListener(flash.events.SecurityErrorEvent.SECURITY_ERROR,flash.bindFunction(this,this.loadSecurityError));sound.load(new flash.net.URLRequest(rndPath));break;;default:stream=new flash.net.URLStream();stream.addEventListener(flash.events.Event.COMPLETE,flash.bindFunction(this,this.loadStreamComplete));stream.addEventListener(flash.events.IOErrorEvent.IO_ERROR,flash.bindFunction(this,this.loadIOError));stream.addEventListener(flash.events.SecurityErrorEvent.SECURITY_ERROR,flash.bindFunction(this,this.loadSecurityError));stream.load(new flash.net.URLRequest(rndPath));break;;}};d.loadSecurityError=function(e)
{if(this._errorHandler!=null)
{this._errorHandler("Security Error: "+this.path+"\n\n"+e)}};d.loadIOError=function(e)
{if(this._errorHandler!=null)
{this._errorHandler("File Not Founded: "+this.path+"\n\n"+e)}};d.getClass=function(className)
{return(this.get_movieClip().get_loaderInfo().get_applicationDomain().getDefinition(className));};d.loadComplete=function()
{this.loaded=true;if(this._completeHandler!=null)
{this._completeHandler()}};d.loadStreamComplete=function(e)
{var bytes=null;var stream=null;bytes=new flash.utils.ByteArray();stream=(e.get_target());stream.readBytes(bytes,0,stream.get_bytesAvailable());stream.close();this.data=bytes;this.loadComplete();};d.loadSoundComplete=function(e)
{this.data=(e.get_target());this.loadComplete();};d.loadTextComplete=function(e)
{var loader=null;loader=(e.get_target());this.data=loader.data;this.loadComplete();};d.loadDisplayObjectComplete=function(e)
{var loaderInfo=null;loaderInfo=(e.get_target());utils.DisplayUtil.stop(loaderInfo.get_content());this.data=loaderInfo.get_content();this.width=loaderInfo.get_width();this.height=loaderInfo.get_height();this.loadComplete();};flash.addDescription("resources.ResourceItem",d,null,null,null,null);}
());;
(function()
{"use strict";var d={};d._object=null;d._property=null;d._value=0;d._frames=0;d._currentFrame=0;d._type=0;d._start=0;d._pause=false;d._offset=0;d._completeHandler=null;d._inited=false;d.get_pause=function()
{return this._pause;};d.set_pause=function(value)
{this._pause=value;};d.get_object=function()
{return this._object;};d.get_property=function()
{return this._property;};d.get_value=function()
{return this._value;};d.get_frames=function()
{return this._frames;};d.get_currentFrame=function()
{return this._currentFrame;};d.set_currentFrame=function(value)
{value=flash.uint(value);this._currentFrame=value;};d.get_type=function()
{return this._type;};d.set_type=function(value)
{value=flash.uint(value);this._type=value;};d.get_start=function()
{return this._start;};d.set_start=function(value)
{this._start=value;};d.get_offset=function()
{return this._offset;};d.set_offset=function(value)
{value=flash.uint(value);this._offset=value;};d.get_completeHandler=function()
{return this._completeHandler;};d.set_completeHandler=function(value)
{this._completeHandler=value;};d.Animation=function(object,property,value,frames,type,offset,completeHandler)
{frames=flash.uint(frames);type=flash.uint(type);offset=flash.uint(offset);if(!utils.Animation._animations)
{utils.Animation.init()}
this._frames=frames;this._value=value;this._property=property;this._object=object;this._type=type;this._offset=offset;this._completeHandler=completeHandler;this._currentFrame=0;this._pause=false;this.initStart();utils.Animation._animations[utils.Animation._animations.length]=this;};d.initStart=function()
{if(!this._inited&&!this._offset)
{this._start=Number(this._object[this._property]);this._inited=true}};d.stop=function()
{var index=0;this.dispose();index=utils.Animation._animations.indexOf(this);if(index!=-1)
{utils.Animation._animations.splice(index,1)}};d.dispose=function()
{this._object=null;this._property=null;this._completeHandler=null;};d.update=function()
{var procent=0;var distance=0;if(this._pause)
{return}
if(this._offset)
{this._offset--;return}
this.initStart();this._currentFrame++;if(this._currentFrame<=this._frames)
{procent=this._currentFrame/this._frames;distance=this._value-this._start;switch(this._type)
{case utils.Animation.LINEAR:this._object[this._property]=this._start+distance*procent;break;;case utils.Animation.FADE_IN_TRIG:this._object[this._property]=this._start+distance*Math.sin(procent*Math.PI*0.5);break;;case utils.Animation.FADE_OUT_TRIG:this._object[this._property]=this._start+distance*(1-Math.sin((1-procent)*Math.PI*0.5));break;;case utils.Animation.SOFT_TRIG:this._object[this._property]=this._start+distance*(1-Math.cos(procent*Math.PI))*0.5;break;;case utils.Animation.FADE_IN_SQUARE:this._object[this._property]=this._start+distance*(1-(1-procent)*(1-procent));break;;case utils.Animation.FADE_OUT_SQUARE:this._object[this._property]=this._start+distance*procent*procent;break;;case utils.Animation.SOFT_SQUARE:if(procent<0.5)
{this._object[this._property]=this._start+distance*procent*procent*2}
else
{this._object[this._property]=this._start+distance*(1-(1-procent)*(1-procent)*2)}
break;;case utils.Animation.FADE_IN_CUBE:this._object[this._property]=this._start+distance*(1-(1-procent)*(1-procent)*(1-procent));break;;case utils.Animation.FADE_OUT_CUBE:this._object[this._property]=this._start+distance*procent*procent*procent;break;;case utils.Animation.SOFT_CUBE:if(procent<0.5)
{this._object[this._property]=this._start+distance*procent*procent*procent*4}
else
{this._object[this._property]=this._start+distance*(1-(1-procent)*(1-procent)*(1-procent)*4)}
break;;}}
else
{if(this._object)
{this._object[this._property]=this._value}
if(this._completeHandler!=null)
{this._completeHandler(this)}
this.stop()}};var s={};s.__init__=function()
{this.LINEAR=0;this.FADE_OUT_TRIG=1;this.FADE_IN_TRIG=2;this.SOFT_TRIG=3;this.FADE_OUT_SQUARE=4;this.FADE_IN_SQUARE=5;this.SOFT_SQUARE=6;this.FADE_OUT_CUBE=7;this.FADE_IN_CUBE=8;this.SOFT_CUBE=9;this._animations=null;this._sprite=null;};s.animate=function(object,property,value,frames,type,offset,completeHandler)
{if(frames==undefined)frames=100;frames=flash.uint(frames);if(type==undefined)type=utils.Animation.LINEAR;type=flash.uint(type);if(offset==undefined)offset=0;offset=flash.uint(offset);if(completeHandler==undefined)completeHandler=null;if(!object||!property)
{return null}
return new utils.Animation(object,property,value,frames,type,offset,completeHandler);};s.stopByObjectProperty=function(object,property)
{var i=0;var animation=null;if(utils.Animation._animations)
{for(i=0;i<utils.Animation._animations.length;i++)
{animation=utils.Animation._animations[i];if(animation._object==object&&animation._property==property)
{animation.stop();i--}}}};s.stopByObject=function(object)
{var i=0;var animation=null;if(utils.Animation._animations)
{for(i=0;i<utils.Animation._animations.length;i++)
{animation=utils.Animation._animations[i];if(animation._object==object)
{animation.stop();i--}}}};s.stopAll=function()
{var animation=null;var t0=null;if(utils.Animation._animations)
{for(t0 in utils.Animation._animations)
{animation=utils.Animation._animations[t0];animation.dispose()}
utils.Animation._animations.length=0}};s.pauseAll=function()
{var animation=null;var t0=null;for(t0 in utils.Animation._animations)
{animation=utils.Animation._animations[t0];animation._pause=true}};s.resumeAll=function()
{var animation=null;var t0=null;for(t0 in utils.Animation._animations)
{animation=utils.Animation._animations[t0];animation._pause=false}};s.getAnimationByObject=function(object)
{var animation=null;var t0=null;for(t0 in utils.Animation._animations)
{animation=utils.Animation._animations[t0];if(animation._object==object)
{return animation}}
return null;};s.init=function()
{utils.Animation._animations=new Array();utils.Animation._sprite=new flash.display.Sprite();utils.Animation._sprite.addEventListener(flash.events.Event.ENTER_FRAME,flash.bindFunction(utils.Animation,utils.Animation.enterFrame));};s.enterFrame=function(e)
{var animation=null;var t0=null;for(t0 in utils.Animation._animations)
{animation=utils.Animation._animations[t0];animation.update()}};flash.addDescription("utils.Animation",d,null,s,null,["utils.Animation","flash.display.Sprite","flash.events.Event"]);}
());;
(function()
{"use strict";var d={};d.Path=function()
{};var s={};s.__init__=function()
{this.DIRECTORY_SEPARATOR="/";this.FOLDER_SEPARATOR="\\";this.EXTENSION_SEPARATOR=".";};s.isDirectory=function(path)
{return path.search("http")!=-1||path.search("www")!=-1||path.search(utils.Path.DIRECTORY_SEPARATOR)!=-1;};s.getParts=function(path)
{var parts=null;parts=path.split(utils.Path.DIRECTORY_SEPARATOR);if(parts.length==1)
{return path.split(utils.Path.FOLDER_SEPARATOR)}
else
{return parts}};s.fromParts=function(parts)
{return parts.join(utils.Path.DIRECTORY_SEPARATOR);};s.getExtension=function(path)
{var fileName=null;var array=null;fileName=utils.Path.getFileName(path);array=fileName.split(utils.Path.EXTENSION_SEPARATOR);if(array.length==2)
{return String(array[1])}
else
{return""}};s.changeExtension=function(path,extension)
{return utils.Path.getDirectory(path)+utils.Path.DIRECTORY_SEPARATOR+utils.Path.getFileNameWithoutExtension(path)+utils.Path.EXTENSION_SEPARATOR+extension;};s.getDirectory=function(path)
{var parts=null;parts=utils.Path.getParts(path);parts.pop();return utils.Path.fromParts(parts);};s.getFileName=function(path)
{return String(utils.Path.getParts(path).pop());};s.getFileNameWithoutExtension=function(path)
{return String(utils.Path.getFileName(path).split(utils.Path.EXTENSION_SEPARATOR)[0]);};flash.addDescription("utils.Path",d,null,s,null,null);}
());;
(function()
{"use strict";var d={};d.DisplayUtil=function()
{};var s={};s.roundPosition=function(object)
{if(object)
{object.set_x(Math.round(object.get_x()));object.set_y(Math.round(object.get_y()))}};s.stop=function(object)
{var i=0;var child=null;if(object instanceof flash.display.MovieClip)
{(object).stop()}
if(object instanceof flash.display.DisplayObjectContainer)
{for(i=0;i<(object).get_numChildren();i++)
{child=(object).getChildAt(i);utils.DisplayUtil.stop(child)}}
else if(object instanceof flash.display.SimpleButton)
{utils.DisplayUtil.stop((object).get_downState());utils.DisplayUtil.stop((object).get_upState());utils.DisplayUtil.stop((object).get_overState());utils.DisplayUtil.stop((object).get_hitTestState())}};s.clear=function(object)
{if(object instanceof flash.display.DisplayObjectContainer)
{while((object).get_numChildren())
{utils.DisplayUtil.clear((object).removeChildAt(0))}}
else if(object instanceof flash.display.SimpleButton)
{utils.DisplayUtil.clear((object).get_downState());utils.DisplayUtil.clear((object).get_upState());utils.DisplayUtil.clear((object).get_overState());utils.DisplayUtil.clear((object).get_hitTestState());(object).set_downState(null);(object).set_upState(null);(object).set_overState(null);(object).set_hitTestState(null)}};s.getVisibleBounds=function(object,targetCoordinateSpace,iterations)
{iterations=flash.int(iterations);var container=null;var result=null;var i=0;var child=null;var bounds=null;iterations--;if(iterations>0)
{if(object instanceof flash.display.DisplayObjectContainer)
{container=(object);result=null;for(i=0;i<container.get_numChildren();i++)
{child=container.getChildAt(i);if(child.get_visible()&&child.get_alpha()>0)
{bounds=utils.DisplayUtil.getVisibleBounds(child,targetCoordinateSpace,iterations);if(bounds)
{if(result)
{result=result.union(bounds)}
else
{result=bounds}}}}
return result}
else
{return object.getBounds(targetCoordinateSpace)}}
else
{return object.getBounds(targetCoordinateSpace)}};s.isMask=function(displayObject)
{var i=0;var child=null;if(!displayObject.get_parent())
{return false}
for(i=0;i<displayObject.get_parent().get_numChildren();i++)
{child=displayObject.get_parent().getChildAt(i);if(child!=displayObject&&child.get_mask()==displayObject)
{return true}}
return false;};s.nextFrame=function(object)
{var movieClip=null;var i=0;var child=null;if(object instanceof flash.display.MovieClip)
{movieClip=(object);if(movieClip.get_currentFrame()==movieClip.get_totalFrames())
{movieClip.gotoAndStop(1)}
else
{movieClip.nextFrame()}}
if(object instanceof flash.display.DisplayObjectContainer)
{for(i=0;i<(object).get_numChildren();i++)
{child=(object).getChildAt(i);utils.DisplayUtil.nextFrame(child)}}
else if(object instanceof flash.display.SimpleButton)
{utils.DisplayUtil.nextFrame((object).get_downState());utils.DisplayUtil.nextFrame((object).get_upState());utils.DisplayUtil.nextFrame((object).get_overState());utils.DisplayUtil.nextFrame((object).get_hitTestState())}};s.getTotalFrames=function(object)
{var totalFrames=0;var i=0;var child=null;totalFrames=0;if(object instanceof flash.display.MovieClip)
{totalFrames=(object).get_totalFrames()}
if(object instanceof flash.display.DisplayObjectContainer)
{for(i=0;i<(object).get_numChildren();i++)
{child=(object).getChildAt(i);totalFrames=flash.uint(Math.max(totalFrames,utils.DisplayUtil.getTotalFrames(child)))}}
else if(object instanceof flash.display.SimpleButton)
{totalFrames=flash.uint(Math.max(totalFrames,utils.DisplayUtil.getTotalFrames((object).get_downState())));totalFrames=flash.uint(Math.max(totalFrames,utils.DisplayUtil.getTotalFrames((object).get_upState())));totalFrames=flash.uint(Math.max(totalFrames,utils.DisplayUtil.getTotalFrames((object).get_overState())));totalFrames=flash.uint(Math.max(totalFrames,utils.DisplayUtil.getTotalFrames((object).get_hitTestState())))}
return totalFrames;};s.renderToBitmapData=function(source,border,bounds,transparent,backgroundColor,scaleX,scaleY,colorTransform)
{if(border==undefined)border=2;if(bounds==undefined)bounds=null;if(transparent==undefined)transparent=true;if(backgroundColor==undefined)backgroundColor=0;backgroundColor=flash.uint(backgroundColor);if(scaleX==undefined)scaleX=1;if(scaleY==undefined)scaleY=1;if(colorTransform==undefined)colorTransform=null;var bitmapData=null;if(!bounds)
{bounds=source.getBounds(source)}
if(border)
{bounds.x=Math.round(bounds.x-border);bounds.y=Math.round(bounds.y-border);bounds.width=Math.round(bounds.width+border*2);bounds.height=Math.round(bounds.height+border*2)}
bitmapData=new flash.display.BitmapData(bounds.width*scaleX,bounds.height*scaleY,transparent,backgroundColor);bitmapData.draw(source,new flash.geom.Matrix(scaleX,0,0,scaleY,-bounds.x*scaleX,-bounds.y*scaleY),colorTransform);return bitmapData;};s.renderToGraphics=function(graphics,source,border,bounds,transparent,backgroundColor,scaleX,scaleY,colorTransform,dx,dy)
{if(border==undefined)border=2;if(bounds==undefined)bounds=null;if(transparent==undefined)transparent=true;if(backgroundColor==undefined)backgroundColor=0;backgroundColor=flash.uint(backgroundColor);if(scaleX==undefined)scaleX=1;if(scaleY==undefined)scaleY=1;if(colorTransform==undefined)colorTransform=null;if(dx==undefined)dx=0;if(dy==undefined)dy=0;var bitmap=null;if(!bounds)
{bounds=source.getBounds(source)}
if(border)
{bounds.x=Math.round(bounds.x-border);bounds.y=Math.round(bounds.y-border);bounds.width=Math.round(bounds.width+border*2);bounds.height=Math.round(bounds.height+border*2)}
bitmap=utils.DisplayUtil.renderToBitmapData(source,0,bounds,transparent,backgroundColor,scaleX,scaleY,colorTransform);graphics.beginBitmapFill(bitmap,new flash.geom.Matrix(bounds.width/bitmap.get_width(),0,0,bounds.height/bitmap.get_height(),bounds.x+dx,bounds.y+dy),false,true);graphics.drawRect(bounds.x+dy,bounds.y+dx,bounds.width,bounds.height);graphics.endFill();return bitmap;};s.isInstance=function(displayObject)
{return displayObject.get_name().length>8&&displayObject.get_name().substr(0,8)=="instance";};s.play=function(displayObject)
{var container=null;var i=0;var child=null;if(displayObject instanceof flash.display.MovieClip)
{(displayObject).play()}
if(displayObject instanceof flash.display.DisplayObjectContainer)
{container=(displayObject);for(i=0;i<container.get_numChildren();i++)
{child=container.getChildAt(i);utils.DisplayUtil.play(child)}}};s.setTextsVisible=function(displayObject,visible)
{var container=null;var i=0;var child=null;if(displayObject instanceof flash.text.TextField)
{(displayObject).set_visible(visible)}
if(displayObject instanceof flash.display.DisplayObjectContainer)
{container=(displayObject);for(i=0;i<container.get_numChildren();i++)
{child=container.getChildAt(i);utils.DisplayUtil.setTextsVisible(child,visible)}}};s.hasParent=function(object,container)
{if(object)
{if(object.get_parent()==container)
{return true}
else
{return utils.DisplayUtil.hasParent(object.get_parent(),container)}}
else
{return false}};flash.addDescription("utils.DisplayUtil",d,null,s,null,["flash.display.MovieClip","flash.display.DisplayObjectContainer","flash.display.SimpleButton","flash.display.BitmapData","flash.geom.Matrix","flash.text.TextField"]);}
());;
(function()
{"use strict";var d={};d.Random=function()
{};var s={};s.randomNumber=function(min,max)
{if(min==undefined)min=0;if(max==undefined)max=1;return min+Math.random()*(max-min);};s.randomUint=function(min,max)
{if(min==undefined)min=0;min=flash.uint(min);if(max==undefined)max=100;max=flash.uint(max);return flash.uint(Math.round(min+Math.random()*(max-min)));};s.randomInt=function(min,max)
{if(min==undefined)min=0;min=flash.int(min);if(max==undefined)max=100;max=flash.int(max);return flash.int(Math.round(min+Math.random()*(max-min)));};s.chance=function(number)
{if(number==undefined)number=0.5;return Math.random()<number;};s.select=function()
{var args=Array.prototype.slice.call(arguments,0);var rnd=0;rnd=utils.Random.randomUint(0,args.length-1);return args[rnd];};s.selectFromArray=function(array)
{var rnd=0;rnd=utils.Random.randomUint(0,array.length-1);return array[rnd];};s.selectFromVector=function(vector)
{var rnd=0;rnd=utils.Random.randomUint(0,vector.length-1);return vector[rnd];};s.randomSign=function()
{return Math.random()<0.5?1:-1;};flash.addDescription("utils.Random",d,null,s,null,null);}
());;
(function()
{"use strict";var d={};d._table=null;d._background=null;d.Main=function()
{this.Sprite_constructor();if(this.get_stage())
{this.init()}
else
{this.addEventListener(flash.events.Event.ADDED_TO_STAGE,flash.bindFunction(this,this.init))}};d.init=function(e)
{if(e==undefined)e=null;this.removeEventListener(flash.events.Event.ADDED_TO_STAGE,flash.bindFunction(this,this.init));this.loadResouces();};d.loadResouces=function()
{resources.ResourcesManager.addItem(new resources.ResourceItem("design/items.swf"));resources.ResourcesManager.addItem(new resources.ResourceItem("design/background.swf"));resources.ResourcesManager.load(flash.bindFunction(this,this.loadResoucesComplete),flash.bindFunction(this,this.loadResoucesProgress),flash.bindFunction(this,this.loadResoucesError));};d.loadResoucesProgress=function(value)
{};d.loadResoucesError=function(message)
{};d.loadResoucesComplete=function()
{this.initGame();};d.initGame=function()
{var item=null;item=resources.ResourcesManager.getItem("design/background.swf");this._background=item.get_movieClip();this.addChild(this._background);this._table=new game.Table(6,10,40,0.5);this.addChild(this._table);this._table.set_x((this.get_stage().get_stageWidth()-this._table.get_width())/2);this._table.set_y((this.get_stage().get_stageHeight()-this._table.get_height())/2);this._table.generate(true);this._table.updateLayout();this.startEyeTimer();};d.startEyeTimer=function()
{var timer=null;timer=new flash.utils.Timer(utils.Random.randomUint(5000,10000));timer.addEventListener(flash.events.TimerEvent.TIMER,flash.bindFunction(this,this.onEyeTimer));timer.start();};d.onEyeTimer=function(e)
{var timer=null;var cell=null;timer=(e.get_target());timer.removeEventListener(flash.events.TimerEvent.TIMER,flash.bindFunction(this,this.onEyeTimer));timer.stop();cell=this._table.getRandomCell();if(cell)
{cell.eyeAnimation()}
flash.trace("onEyeTimer",cell);this.startEyeTimer();};var s={};s.__init__=function()
{this.prototype.Sprite_constructor=this.__base__;};flash.addDescription("Main",d,"flash.display.Sprite",s,null,null);}
());;
(function()
{"use strict";var d={};d._columns=0;d._rows=0;d._size=0;d._cells=null;d._chance=0;d.get_columns=function()
{return this._columns;};d.get_rows=function()
{return this._rows;};d.get_width=function()
{return this._columns*this._size;};d.set_width=function(value)
{};d.get_height=function()
{return this._rows*this._size;};d.set_height=function(value)
{};d.get_chance=function()
{return this._chance;};d.set_chance=function(value)
{this._chance=value;};d.get_numCells=function()
{var num=0;var ix=0;var iy=0;num=0;for(ix=0;ix<this._columns;ix++)
{for(iy=0;iy<this._rows;iy++)
{if(this.getCell(ix,iy))
{num++}}}
return num;};d.Table=function(columns,rows,size,chance)
{columns=flash.int(columns);rows=flash.int(rows);var ix=0;this.Sprite_constructor();this._chance=chance;this._size=size;this._rows=rows;this._columns=columns;this._cells=new Array(this._columns);for(ix=0;ix<this._columns;ix++)
{this._cells[ix]=new Array(this._rows)}
this.updateLayout();};d.setCell=function(column,row,cell)
{column=flash.int(column);row=flash.int(row);if(column<this._columns&&column>=0&&row<this._rows&&row>=0)
{this._cells[column][row]=cell}};d.getCell=function(column,row)
{column=flash.int(column);row=flash.int(row);if(column<this._columns&&column>=0&&row<this._rows&&row>=0)
{return this._cells[column][row]}
else
{return null}};d.getCellsByType=function(type)
{type=flash.int(type);var cells=null;var ix=0;var iy=0;var cell=null;cells=new Array();for(ix=0;ix<this._columns;ix++)
{for(iy=0;iy<this._rows;iy++)
{cell=this.getCell(ix,iy);if(cell&&cell.get_type()==type)
{cells.push(cell)}}}
return cells;};d.updateLayout=function(completeHandler)
{if(completeHandler==undefined)completeHandler=null;var ix=0;var iy=0;var cell=null;this.draw();for(ix=0;ix<this._columns;ix++)
{for(iy=0;iy<this._rows;iy++)
{cell=this.getCell(ix,iy);if(cell)
{cell.set_x(ix*this._size);cell.fall(iy*this._size,utils.Random.randomInt(0,10))}}}
if(completeHandler!=null)
{utils.Animation.animate(this,"alpha",1,20,utils.Animation.LINEAR,0,completeHandler)}};d.draw=function()
{};d.generateCellsByType=function(number,type)
{number=flash.int(number);type=flash.int(type);var ix=0;var iy=0;var cell=null;while(number)
{ix=utils.Random.randomInt(1,this._columns-2);iy=utils.Random.randomInt(1,this._rows-4);if(!this.getCell(ix,iy))
{cell=new game.Cell(ix,iy,type,this._size);cell.set_x(ix*this._size);cell.set_y(-this.get_height()*2+iy*this._size);this.addCell(cell);number--}}};d.generate=function(first)
{if(first==undefined)first=false;var ix=0;var iy=0;var cell=null;for(ix=0;ix<this._columns;ix++)
{for(iy=0;iy<this._rows;iy++)
{if(!this.getCell(ix,iy))
{cell=new game.Cell(ix,iy,utils.Random.randomInt(0,3),this._size);cell.set_x(ix*this._size);if(first)
{cell.set_y(-this.get_height()*2+iy*this._size)}
else
{cell.set_y(-this._size*2)}
this.addCell(cell)}}}};d.getRandomCell=function()
{return this._cells[utils.Random.randomInt(0,this._columns-1)][utils.Random.randomInt(0,this._rows-1)];};d.addCell=function(cell)
{cell.addEventListener(flash.events.MouseEvent.CLICK,flash.bindFunction(this,this.cellClick));this.setCell(cell.get_column(),cell.get_row(),cell);this.addChild(cell);};d.removeCell=function(cell)
{cell.removeEventListener(flash.events.MouseEvent.CLICK,flash.bindFunction(this,this.cellClick));this.setCell(cell.get_column(),cell.get_row(),null);this.setChildIndex(cell,this.get_numChildren()-1);utils.Animation.stopByObject(cell);utils.Animation.animate(cell,"x",this.get_width(),10,utils.Animation.FADE_OUT_SQUARE,0,flash.bindFunction(this,this.removeCellComplete));utils.Animation.animate(cell,"y",this.get_height(),10,utils.Animation.FADE_OUT_SQUARE);};d.removeCellComplete=function(a)
{var cell=null;cell=(a.get_object());this.removeChild(cell);};d.removeCells=function(cells)
{var cell=null;var t0=null;for(t0 in cells)
{cell=cells[t0];this.removeCell(cell)}};d.cellClick=function(e)
{var cell=null;var cells=null;cell=(e.get_currentTarget());cells=new Array();cells.push(cell);this.getNearCells(cell,cells);if(cells.length>2)
{this.removeCells(cells);this.fallCells();this.generate();this.updateLayout()}};d.fallCellsComplete=function(a)
{this.fallCells();this.generate();this.updateLayout();};d.removeKeys=function()
{var ix=0;var cell=null;for(ix=0;ix<this._columns;ix++)
{cell=this.getCell(ix,this._rows-1);if(cell&&cell.get_type()==0)
{this.removeCell(cell)}}};d.getNearCells=function(cell,cells)
{this.addNearCell(cell.get_column(),cell.get_row()-1,cell.get_type(),cells);this.addNearCell(cell.get_column(),cell.get_row()+1,cell.get_type(),cells);this.addNearCell(cell.get_column()-1,cell.get_row(),cell.get_type(),cells);this.addNearCell(cell.get_column()+1,cell.get_row(),cell.get_type(),cells);};d.addNearCell=function(column,row,type,cells)
{column=flash.int(column);row=flash.int(row);type=flash.int(type);var cell=null;cell=this.getCell(column,row);if(cell&&cell.get_type()==type&&cells.indexOf(cell)==-1)
{cells.push(cell);this.getNearCells(cell,cells)}};d.fallCells=function()
{var ix=0;var iy=0;var cell=null;for(ix=0;ix<this._columns;ix++)
{for(iy=this._rows-1;iy>=0;iy--)
{if(!this.getCell(ix,iy))
{cell=this.getUpCell(ix,iy-1);if(cell)
{this.changeCell(cell,ix,iy)}}}}};d.changeCell=function(cell,column,row)
{column=flash.int(column);row=flash.int(row);this.setCell(cell.get_column(),cell.get_row(),null);cell.set_column(column);cell.set_row(row);this.setCell(column,row,cell);};d.getUpCell=function(column,row)
{column=flash.int(column);row=flash.int(row);var iy=0;var cell=null;for(iy=row;iy>=0;iy--)
{cell=this.getCell(column,iy);if(cell)
{return cell}}
return null;};var s={};s.__init__=function()
{this.prototype.Sprite_constructor=this.__base__;};flash.addDescription("game.Table",d,"flash.display.Sprite",s,null,null);}
());;
(function()
{"use strict";var d={};d._type=0;d._size=0;d._column=0;d._row=0;d._design=null;d._targetY=0;d._amplitudeY=0;d.get_type=function()
{return this._type;};d.get_size=function()
{return this._size;};d.get_column=function()
{return this._column;};d.set_column=function(value)
{value=flash.int(value);this._column=value;};d.get_row=function()
{return this._row;};d.set_row=function(value)
{value=flash.int(value);this._row=value;};d.Cell=function(column,row,type,size)
{column=flash.int(column);row=flash.int(row);type=flash.int(type);this.Sprite_constructor();this._row=row;this._column=column;this._size=size;this._type=type;this.draw();this._targetY=0;};d.draw=function()
{var designName=null;var item=null;var DesignClass=null;designName;switch(this._type)
{case 0:designName="BeeDesign";break;;case 1:designName="DragonflyDesign";break;;case 2:designName="LadybirdDesign";break;;case 3:designName="MosquitoDesign";break;;}
item=resources.ResourcesManager.getItem("design/items.swf");DesignClass=item.getClass(designName);this._design=(new DesignClass());this._design.set_rotation(utils.Random.randomNumber(-20,20));this._design.set_x(this._size/2+utils.Random.randomNumber(-3,3));this._design.set_y(this._size/2+utils.Random.randomNumber(-3,3));this.addChild(this._design);this.get_graphics().clear();this.get_graphics().beginFill(0,0);this.get_graphics().drawEllipse(0,0,this._size,this._size);this._design.eyeRight.addFrameScript(0,flash.bindFunction(this,function()
{this._design.eyeRight.stop();}));this._design.eyeLeft.addFrameScript(0,flash.bindFunction(this,function()
{this._design.eyeLeft.stop();}));};d.eyeAnimation=function()
{this._design.eyeRight.play();this._design.eyeLeft.play();};d.fall=function(targetY,offset)
{offset=flash.int(offset);this._targetY=targetY;if(this.get_y()!=this._targetY)
{this._amplitudeY=(this._targetY-this.get_y())/5;if(this._amplitudeY>10)
{this._amplitudeY=10}
utils.Animation.stopByObject(this);utils.Animation.animate(this,"y",this._targetY+this._amplitudeY,20,utils.Animation.FADE_OUT_SQUARE,0,flash.bindFunction(this,this.fallComplete))}};d.fallComplete=function(a)
{this._amplitudeY=-this._amplitudeY/2;if(Math.abs(this._amplitudeY)<1)
{this.set_y(this._targetY)}
else
{utils.Animation.animate(this,"y",this._targetY+this._amplitudeY,5,utils.Animation.SOFT_SQUARE,0,flash.bindFunction(this,this.fallComplete))}};var s={};s.__init__=function()
{this.prototype.Sprite_constructor=this.__base__;};flash.addDescription("game.Cell",d,"flash.display.Sprite",s,null,null);}
());;
(function()
{"use strict";var d={};d.SpiderDesign=function()
{this.MovieClip_constructor();};var s={};s.__init__=function()
{this.prototype.MovieClip_constructor=this.__base__;};flash.addDescription("SpiderDesign",d,"flash.display.MovieClip",s,null,null);}
());;
(function()
{"use strict";var d={};d.eyeRight=null;d.eyeLeft=null;d.LadybirdDesign=function()
{this.MovieClip_constructor();};var s={};s.__init__=function()
{this.prototype.MovieClip_constructor=this.__base__;};flash.addDescription("LadybirdDesign",d,"flash.display.MovieClip",s,null,null);}
());;
(function()
{"use strict";var d={};d.eyeRight=null;d.eyeLeft=null;d.MosquitoDesign=function()
{this.MovieClip_constructor();};var s={};s.__init__=function()
{this.prototype.MovieClip_constructor=this.__base__;};flash.addDescription("MosquitoDesign",d,"flash.display.MovieClip",s,null,null);}
());;
(function()
{"use strict";var d={};d.SpiderDesign=function()
{this.MovieClip_constructor();};var s={};s.__init__=function()
{this.prototype.MovieClip_constructor=this.__base__;};flash.addDescription("SpiderDesign",d,"flash.display.MovieClip",s,null,null);}
());;
(function()
{"use strict";var d={};d.eyeRight=null;d.eyeLeft=null;d.BeeDesign=function()
{this.MovieClip_constructor();};var s={};s.__init__=function()
{this.prototype.MovieClip_constructor=this.__base__;};flash.addDescription("BeeDesign",d,"flash.display.MovieClip",s,null,null);}
());;
(function()
{"use strict";var d={};d.eyeRight=null;d.eyeLeft=null;d.DragonflyDesign=function()
{this.MovieClip_constructor();};var s={};s.__init__=function()
{this.prototype.MovieClip_constructor=this.__base__;};flash.addDescription("DragonflyDesign",d,"flash.display.MovieClip",s,null,null);}
());